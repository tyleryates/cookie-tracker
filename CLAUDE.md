# CLAUDE.md

## CRITICAL: NEVER Auto-Commit or Auto-Publish

NEVER create git commits, push, build, or publish without explicit user request. User wants full control over git history and release timing.

## Working in This Repo

- Edit `.ts`/`.tsx` files in `src/`, NEVER `.js` files in `dist/` (auto-generated by `tsc`)
- `make compile` to build. `make dev` to run. `make format` to lint/format. `make` to see all commands.
- When deleting or renaming a source file, manually remove the corresponding `.js` file from `dist/`

## What This App Does

Electron desktop app that syncs and reconciles Girl Scout cookie sales data from **Digital Cookie** (customer-facing online sales) and **Smart Cookie** (troop management system). These are separate platforms that don't auto-sync — this app downloads from both and reconciles them.

**Smart Cookie is the source of truth** for billing, inventory, and official sales reporting. Digital Cookie is one sales channel that eventually syncs to Smart Cookie. When numbers differ, Smart Cookie is correct. Reports should use SC as the baseline with DC providing supplemental detail.

## How the Code Is Organized

Three layers: **Main process** (`src/main.ts`) handles IPC, scrapers, credentials, file system. **Renderer** (`src/renderer/`) is a Preact component tree — `app.tsx` owns all state, passes props down. **Data processing** (`src/data-processing/`) is pure functions that build a `UnifiedDataset` from raw imported data. All files use kebab-case.

## Key Documentation

- **`RULES.md`** — Business rules, data classification, inventory, financials (single source of truth for how the app should behave)
- **`docs/DESIGN-PRINCIPLES.md`** — Architecture principles: classify once, positive sums, reports calculate own needs
- **`docs/DOMAIN.md`** — Cookie program domain knowledge, data format reference, scraper authentication, glossary
- **`docs/DISTRIBUTION-UPDATES.md`** — Build, version, and release procedures
